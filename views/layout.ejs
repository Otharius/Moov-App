<html lang="fr">
<head>
    <link href="/css/computer.css" media="(min-width: 768px)" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/css/mobil.css" media="(max-width: 480px)" type="text/css">
    <meta name="viewport" content="width=device-width"/>
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
</head>

<body>
<%- body %>
</body>
<script>
    
    function savePseudo() {
        pseudo = document.getElementById('pseudo').value;
        localStorage.setItem('pseudo', pseudo);
    }

    function appendPseudo() {
        const pseudo = localStorage.getItem('pseudo');

        document.getElementById('pseudo').setAttribute('value', pseudo);
        document.getElementById('logoutPseudo').setAttribute('value', pseudo);
    }

    function mealAppendPseudo() {
        const pseudo = localStorage.getItem('pseudo');

        document.getElementById('ok_count_calorie').setAttribute('value', pseudo);
        document.getElementById('reset_count_calorie').setAttribute('value', pseudo);
    }

    function trainingAppendPseudo() {
        const pseudo = localStorage.getItem('pseudo');

        document.getElementById('addTraining').setAttribute('value', pseudo)
    }


// Ouvre une popup sur la page d'entrainement    

    const modal1 = document.getElementById("myModal");
    const btn = document.getElementById("myBtn");
    const span = document.getElementsByClassName("training_close")[0];

    btn.onclick = function() {
  
      modal1.style.display = "block";
    }

    span.onclick = function() {
      modal1.style.display = "none";
    }

    window.onclick = function(event) {
      if (event.target == modal1 || event.target == modal2) {
        modal1.style.display = "none";
        modal2.style.display = "none";
      }
    } 
  

  // Ouvre une popup sur la page pour voir tt les entrainements possibles    

    const modal2 = document.getElementById("mySecondModal");
    const button = document.getElementById("See_exercice");
    const Close = document.getElementsByClassName("training_close")[1];

    button.onclick = function() {
  
      modal2.style.display = "block";
    }

    Close.onclick = function() {
      modal2.style.display = "none";
    }
  

// ------------------------------------------------------

    function addExercice() {
     
        const element = '<br><div class="Content_exercice">'+
          '<div class="Select-box"><div class="optionsContainer"><div class="Option"><input type="radio"class="radio"id="Pompe"name="category" value=""/>'+
        '<label for="automobiles">Pompe</label></div>'+
        '<div class="Option"><input type="radio" class="radio" id="Squat" name="category" value=""/><label for="film">Squat</label></div>'+
        '<div class="Option"><input type="radio" class="radio" id="Traction" name="category" value=""/><label for="science">Traction</label></div></div>'+
        '<div class="Selected" id="selected" onclick="optionMove()">Sélectionner un exercice</div>'
        '<div class="Search-box"><input type="text" placeholder="Trouver un exercice" name="exerice" id="ExerciceChoice" value=""/></div></div>'+
        '<br>Nombre de répétition:<input type="number" name="repetition" id="" min="1" max="50" value="1" required>'+
        '<br>Nombre de série:<input type="number" name="serie" id="" min="1" max="10" value="1" required>'+
        '<br>Temps de repos:<label for=""><input type="number" name="reposMin" id="" min="0" max="30" value="0" required>Minute</label>'+
        '<label for=""><input type="number" name="reposSec" id="" min="0" max="59" value="30" required>Seconde</label><br><br></div>'

        

        let section = document.querySelector('section');
        let seance = document.createElement('div');

        seance.innerHTML = element;
        section.appendChild(seance);

    }
    

// Gère la sélection du choix de l'exercice


      let selected = document.querySelector(".selected");
      const optionsContainer = document.querySelector(".options-container");
      const searchBox = document.querySelector(".search-box input");

      const optionsList = document.querySelectorAll(".option");

      selected.addEventListener("click", () => {
        optionsContainer.classList.toggle("active");

        searchBox.value = "";
        filterList("");

        if (optionsContainer.classList.contains("active")) {
          searchBox.focus();
        }
      });


      optionsList.forEach(o => {
        o.addEventListener("click", () => {
          selected.innerHTML = o.querySelector("label").innerHTML;
          optionsContainer.classList.remove("active");
          document.getElementById('exerciceChoice').value = selected.innerHTML
        });
      });

      searchBox.addEventListener("keyup", function(e) {
        filterList(e.target.value);
      });

      const filterList = searchTerm => {
        searchTerm = searchTerm.toLowerCase();
        optionsList.forEach(option => {
          let label = option.firstElementChild.nextElementSibling.innerText.toLowerCase();
          if (label.indexOf(searchTerm) != -1) {
            option.style.display = "block";
          } else {
            option.style.display = "none";
          }
        });
      };


      function optionMove() {

          alert("test a")
          const select = document.getElementById('selected');
          const OptionsContainer = document.querySelector(".optionsContainer");
          const boxSearch = document.querySelector(".Search-box");

          const Options = document.querySelectorAll(".radio");

          OptionsContainer.classList.toggle("active");

          boxSearch.value = "";

          filterList("");


        if (OptionsContainer.classList.contains("active")) {
          boxSearch.focus();
        }
        alert("z")
}
        

      //   Options.forEach(o => {
      //     x.addEventListener("click", () => {
      //       select.innerHTML = x.querySelector("label").innerHTML;
      //       OptionsContainer.ClassList.remove("active");
      //       document.getElementById('ExerciceChoice').value = select.innerHTML
      //       alert("a")
      //     });
      //   });

      //   boxSearch.addEventListener("keyup", function(e) {
      //     filter_List(e.target.value);
      //     alert("b")
      //   });

      //   const filter_List = searchTerm => {
      //   searchTerm = searchTerm.toLowerCase();
      //   optionsList.forEach(option => {
      //     alert("c")
      //     let label = option.firstElementChild.nextElementSibling.innerText.toLowerCase();
      //     if (label.indexOf(searchTerm) != -1) {
      //       option.style.display = "block";
      //     } else {
      //       option.style.display = "none";
      //     }
      //   });}
      


// ------------------------------------------------------------------------------------
</script>
</html>
